import{b as c,a,_ as R,j as r,n as U}from"./app-1e50fc25.js";import{A as E}from"./AuthenticatedLayout-98726e4f.js";import{I as m}from"./InputError-86de2c2f.js";import{P as A}from"./PrimaryButton-14b933fc.js";import{I as s}from"./InputLabel-8b396008.js";import{T as F}from"./TextInput-88979409.js";import{H as L,S as G}from"./react-select.esm-0deeb9cb.js";import{E as B}from"./react-drag-drop-files.esm-4042037f.js";import{N as H}from"./react-number-format.es-48c6768b.js";import{E as J}from"./Editor-9ba3f569.js";import"./ApplicationLogo-39fb6c53.js";import"./Dropdown-cde00935.js";import"./transition-1dc21d7e.js";import"./index-fea706aa.js";function ie({auth:w,kampanye:i}){const N=c.forwardRef(({value:e,onClick:l},f)=>a("button",{type:"button",className:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900focus:outline-none focus:ring-2 focus:ring-indigo-500 transition ease-in-out duration-150",onClick:l,ref:f,children:e})),[x]=c.useState(new Date(i.tgl_berakhir)),{data:t,setData:n,post:y,processing:_,reset:p,errors:o,transform:I,progress:M}=R({deskripsi:i.deskripsi,judul:i.judul,target:i.target,tgl_berakhir:x,gambar:"",kategori:i.kategori}),b=c.useRef(null);I(e=>({...e,tgl_berakhir:e.tgl_berakhir.toISOString().slice(0,19).replace("T"," ")}));const j=e=>{e.preventDefault(),y(route("kampanye.store"),{onSuccess:()=>p()})},S=e=>{n(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},C=(e,l,f)=>{const d=document.createElement("input");d.setAttribute("type","file"),d.setAttribute("accept","image/*"),d.onchange=()=>{const u=d.files[0],g=new FileReader;g.readAsDataURL(u),g.onload=()=>{const T="blobid"+new Date().getTime(),v=b.current.editorUpload.blobCache,P=g.result.split(",")[1],k=v.create(T,u,P);v.add(k),e(k.blobUri(),{title:u.name})}},d.click()},[D,h]=c.useState();c.useEffect(()=>{if(!t.gambar){h(void 0);return}const e=URL.createObjectURL(t.gambar);return h(e),()=>URL.revokeObjectURL(e)},[t.gambar]);const K=[{value:"Pendidikan",label:"Pendidikan"},{value:"Kemanusiaan",label:"Kemanusiaan"}];return r(E,{auth:w,children:[a(U,{title:"Kampanye"}),a("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 bg-gray-200",children:r("form",{onSubmit:j,children:[r("div",{children:[a(s,{forInput:"gambarnow",value:"Gambar Sekarang"}),a("img",{src:"/storage/"+i.gambar,id:"gambarnow",className:"w-full h-56 md:h-96 rounded-md object-fill"})]}),r("div",{children:[a(s,{forInput:"judul",value:"Judul Kampanye"}),a(F,{placeholder:"Judul Kampanye ...",id:"judul",name:"judul",value:t.judul,className:"mt-1 block w-full",autoComplete:"off",isFocused:!0,handleChange:S}),a(m,{message:o.judul,className:"mt-1"})]}),r("div",{children:[a(s,{forInput:"deskkampanye",value:"Deskripsi Singkat Kampanye",className:"mt-4"}),a(J,{id:"deskkampanye",tinymceScriptSrc:"../../tinymce/tinymce.min.js",onInit:(e,l)=>b.current=l,value:t.deskripsi,onEditorChange:(e,l)=>n("deskripsi",e),image_uploadtab:!0,init:{setup:e=>{e.on("init change",()=>{e.save()})},content_css:"default",height:800,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount","preview","visualblocks"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter  alignjustify | bullist numlist outdent indent | image | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",image_title:!0,automatic_uploads:!0,images_upload_url:"/upload",file_picker_types:"image",file_picker_callback:C,image_dimensions:!1,image_class_list:[{title:"Responsive",value:"img-responsive"}]}}),a(m,{message:o.deskripsi,className:"mt-1"})]}),r("div",{children:[a(s,{forInput:"target",value:"Target Dana",className:"mt-4"}),r("div",{className:"flex flex-wrap items-stretch w-full relative mt-1",children:[a("div",{className:"flex -mr-px",children:a("span",{className:"flex items-center leading-normal bg-white rounded rounded-r-none border border-r-0 border-grey-light px-3 whitespace-no-wrap text-grey-dark text-sm",children:"Rp"})}),a(H,{name:"target",id:"target",thousandSeparator:!0,valueIsNumericString:!0,value:t.target,onValueChange:e=>{n("target",e.value)},className:"focus:border-indigo-500 focus:ring-indigo-500 rounded-l-none rounded-md shadow-sm",autoComplete:"off",placeholder:"Target Dana ..."})]}),a(m,{message:o.target,className:"mt-1"})]}),r("div",{children:[a(s,{forInput:"tgl_berakhir",value:"Tanggal Berakhir Kampanye",className:"mt-4"}),a(L,{id:"tgl_berakhir",selected:t.tgl_berakhir,minDate:new Date,className:"rounded max-w-sm w-full mt-1 ",autoComplete:"off",placeholderText:"Pilih Tanggal",startDate:t.tgl_berakhir,customInput:a(N,{}),onChange:e=>n("tgl_berakhir",e),popperModifiers:[{name:"arrow",options:{padding:({popper:e,reference:l})=>({right:Math.min(e.width,l.width)-24})}}]}),a(m,{message:o.tgl_mulai,className:"mt-1"})]}),r("div",{children:[a(s,{forInput:"kategori",value:"Kategori Kampanye",className:"mt-4"}),a(G,{options:K,isSearchable:!1,onChange:e=>n("kategori",e.value),placeholder:"Pilih Kategori ...",defaultValue:{value:i.kategori,label:i.kategori}}),a(m,{message:o.kategori,className:"mt-1"})]}),r("div",{children:[a(s,{forInput:"gambar",value:"Gambar Berita",className:"mt-4"}),a(B,{handleChange:e=>{n("gambar",e)},name:"file",types:["JPG","PNG","JPEG"],hoverTitle:" ",children:a("div",{className:"bg-white grid place-content-center h-48 rounded-lg",children:a("div",{children:a("p",{children:t.gambar?`File ${t.gambar.name}`:"Unggah / Tarik File Kesini"})})})}),t.gambar?a("button",{type:"button",className:"border border-white bg-slate-400",onClick:()=>{p("gambar")},children:"Clear"}):null,a(m,{message:o.gambar,className:"mt-1"}),t.gambar&&a("img",{src:D,className:"w-full h-56 md:h-96 rounded-md object-fill"})]}),a(A,{className:"mt-4",disabled:_,children:"Ubah Kampanye"})]})})]})}export{ie as default};
