import{_ as K,b as l,a as e,F as g,j as i}from"./app-1e50fc25.js";import"./Dropdown-cde00935.js";import{P as _}from"./PrimaryButton-14b933fc.js";import{I as m}from"./InputError-86de2c2f.js";import{I as d}from"./InputLabel-8b396008.js";import{T as L}from"./TextInput-88979409.js";import{E as T}from"./react-drag-drop-files.esm-4042037f.js";import{E as A}from"./Editor-9ba3f569.js";import{T as D}from"./TableBerita-b534dda7.js";import{C as J}from"./CardLink-16af74d6.js";import"./transition-1dc21d7e.js";function te({auth:G,kampanyes:h}){const{data:t,setData:n,post:w,processing:N,reset:u,errors:o,transform:H,progress:O}=K({body:"<p>Masukan Isi Berita.</p>",judul:"",gambar:"",kampanye_id:""});console.log(t);const f=l.useRef(null),j=a=>{a.preventDefault(),w(route("post.store"),{onSuccess:()=>u()})},R=a=>{n(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},x=(a,r,z)=>{const s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.onchange=()=>{const p=s.files[0],b=new FileReader;b.readAsDataURL(p),b.onload=()=>{const P="blobid"+new Date().getTime(),y=f.current.editorUpload.blobCache,F=b.result.split(",")[1],k=y.create(P,p,F);y.add(k),a(k.blobUri(),{title:p.name})}},s.click()},[C,v]=l.useState();l.useEffect(()=>{if(!t.gambar){v(void 0);return}const a=URL.createObjectURL(t.gambar);return v(a),()=>URL.revokeObjectURL(a)},[t.gambar]);const[I,B]=l.useState(),c=l.useRef(),S=l.useCallback(()=>{const a=c.current.api.getSelectedRows();a[0]&&B(a[0].judul)},[]),E=a=>{const r=c.current.api.getSelectedRows();r[0]&&n("kampanye_id",r[0].id)},U=()=>{c.current.api.deselectAll(),u("kampanye_id")};return e(g,{children:e("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:!h.length==0?e(g,{children:i("form",{onSubmit:j,children:[i("div",{children:[e(d,{forInput:"judul",value:"Judul Berita"}),e(L,{placeholder:"Judul Berita ...",id:"judul",name:"judul",value:t.judul,className:"mt-1 block w-full",autoComplete:"off",isFocused:!0,handleChange:R}),e(m,{message:o.judul,className:"mt-1"})]}),i("div",{children:[e(d,{forInput:"isiberita",value:"Isi Berita",className:"mt-4"}),e(A,{id:"isiberita",tinymceScriptSrc:"../../tinymce/tinymce.min.js",onInit:(a,r)=>f.current=r,value:t.body,onEditorChange:(a,r)=>n("body",a),image_uploadtab:!0,init:{setup:a=>{a.on("init change",()=>{a.save()})},content_css:"default",height:800,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount","preview","visualblocks"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter  alignjustify | bullist numlist outdent indent | image | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",image_title:!0,automatic_uploads:!0,images_upload_url:"/upload",file_picker_types:"image",file_picker_callback:x,image_dimensions:!1,image_class_list:[{title:"Responsive",value:"img-responsive"}]}}),e(m,{message:o.body,className:"mt-1"})]}),i("div",{children:[e(d,{forInput:"gambar",value:"Gambar Berita",className:"mt-4"}),e(T,{id:"gambar",handleChange:a=>{n("gambar",a)},name:"file",types:["JPG","PNG","JPEG"],hoverTitle:" ",children:e("div",{className:"bg-white grid place-content-center h-48 rounded-lg",children:e("div",{children:e("p",{children:t.gambar?`File ${t.gambar.name}`:"Klik untuk Unggah / Tarik File Kesini"})})})}),t.gambar?e("button",{type:"button",className:"border border-white bg-slate-400",onClick:()=>{u("gambar")},children:"Clear"}):null,e(m,{message:o.gambar,className:"mt-1"}),t.gambar&&e("img",{src:C,className:"w-full h-56 md:h-96 rounded-md object-fill"})]}),e(d,{forInput:"kampanye",value:"Pilih Kampanye",className:"mt-4"}),e("div",{children:e(D,{rowData:h,onSelectionChanged:S,gridRef:c,onRowClicked:E})}),e(m,{message:o.kampanye_id,className:"mt-1"}),t.kampanye_id&&i("div",{className:"mt-4",children:[i("p",{className:"text-balck",children:["Kampanye yang dipilih : ",I]}),e(_,{onClick:()=>U(),type:"button",children:"Reset Selection"})]}),e(_,{className:"mt-4",disabled:N,children:"Buat Berita"})]})}):e(g,{children:i("div",{className:"text-center",children:[e("p",{className:"text-lg text-gray-800 mb-4",children:"Belum Ada kampanye ..."}),e(J,{href:route("kampanye.create"),children:"Buat Kampanye"})]})})})})}export{te as default};
