import{_ as K,b as r,a as e,F as g,j as l}from"./app-1e50fc25.js";import{I as u}from"./InputError-86de2c2f.js";import{P as w}from"./PrimaryButton-14b933fc.js";import{I as o}from"./InputLabel-8b396008.js";import{T}from"./TextInput-88979409.js";import{E as L}from"./react-drag-drop-files.esm-4042037f.js";import{E as D}from"./Editor-9ba3f569.js";import{T as G}from"./TableBerita-b534dda7.js";function Y({kampanyes:h,berita:s}){const{data:t,setData:c,post:_,processing:R,reset:f,errors:m,transform:J,progress:H}=K({body:s.body,judul:s.judul,gambar:"",kampanye_id:"",_method:"post"});console.log(t);const v=r.useRef(null),x=a=>{a.preventDefault(),_(route("post.update",s))},I=a=>{c(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},C=(a,i,O)=>{const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.onchange=()=>{const p=n.files[0],b=new FileReader;b.readAsDataURL(p),b.onload=()=>{const A="blobid"+new Date().getTime(),N=v.current.editorUpload.blobCache,F=b.result.split(",")[1],j=N.create(A,p,F);N.add(j),a(j.blobUri(),{title:p.name})}},n.click()},[k,y]=r.useState();console.log(k),r.useEffect(()=>{if(!t.gambar){y(null);return}const a=URL.createObjectURL(t.gambar);return y(a),()=>URL.revokeObjectURL(a)},[t.gambar]);const[S,U]=r.useState(),d=r.useRef(),B=r.useCallback(()=>{const a=d.current.api.getSelectedRows();a[0]&&U(a[0].judul)},[]),E=a=>{const i=d.current.api.getSelectedRows();i[0]&&c("kampanye_id",i[0].id)},P=()=>{d.current.api.deselectAll(),f("kampanye_id")};return e(g,{children:e("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:!h.length==0?e(g,{children:l("form",{onSubmit:x,children:[l("div",{children:[e(o,{forInput:"gambarnow",value:"Gambar Berita"}),e("img",{src:"/storage/"+s.gambar,id:"gambarnow",className:"w-full h-56 md:h-96 rounded-md object-fill"})]}),l("div",{children:[e(o,{forInput:"judul",value:"Judul Berita",className:"mt-4"}),e(T,{placeholder:"Judul Berita ...",id:"judul",name:"judul",value:t.judul,className:"mt-1 block w-full",autoComplete:"off",isFocused:!0,handleChange:I}),e(u,{message:m.judul,className:"mt-1"})]}),l("div",{children:[e(o,{forInput:"isiberita",value:"Isi Berita",className:"mt-4"}),e(D,{id:"isiberita",tinymceScriptSrc:"../../../tinymce/tinymce.min.js",onInit:(a,i)=>v.current=i,value:t.body,onEditorChange:(a,i)=>c("body",a),image_uploadtab:!0,init:{setup:a=>{a.on("init change",()=>{a.save()})},content_css:"default",height:800,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount","preview","visualblocks"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter  alignjustify | bullist numlist outdent indent | image | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",image_title:!0,automatic_uploads:!0,images_upload_url:"/upload",file_picker_types:"image",file_picker_callback:C,image_dimensions:!1,image_class_list:[{title:"Responsive",value:"img-responsive"}]}}),e(u,{message:m.body,className:"mt-1"})]}),l("div",{children:[e(o,{forInput:"gambar",value:"Gambar Berita",className:"mt-4"}),e(L,{id:"gambar",handleChange:a=>{c("gambar",a)},name:"file",types:["JPG","PNG","JPEG"],hoverTitle:" ",children:e("div",{className:"bg-white grid place-content-center h-48 rounded-lg",children:e("div",{children:e("p",{children:t.gambar?`File ${t.gambar.name}`:"Klik untuk Unggah / Tarik File Kesini"})})})}),t.gambar?e("button",{type:"button",className:"border border-white bg-slate-400",onClick:()=>{f("gambar")},children:"Clear"}):null,e(u,{message:m.gambar,className:"mt-1"}),t.gambar&&e("img",{src:k,className:"w-full h-56 md:h-96 rounded-md object-fill"})]}),e("div",{className:"mt-4",children:l("p",{className:"text-black",children:["Kampanye Sekarang : ",s.kampanye.judul]})}),e(o,{forInput:"kampanye",value:"Pilih Kampanye",className:"mt-4"}),e("div",{children:e(G,{rowData:h,onSelectionChanged:B,gridRef:d,onRowClicked:E})}),e(u,{message:m.kampanye_id,className:"mt-1"}),t.kampanye_id&&l("div",{className:"mt-4",children:[l("p",{className:"text-black",children:["Kampanye Akan diubah menjadi : ",S]}),e(w,{onClick:()=>P(),type:"button",children:"Reset Selection"})]}),e(w,{className:"mt-4",disabled:R,children:"Ubah Berita"})]})}):e(g,{children:e("div",{className:"text-center",children:e("p",{className:"text-lg text-gray-800 mb-4",children:"Belum Ada kampanye ..."})})})})})}export{Y as default};
